#!/usr/bin/env ruby
# frozen_string_literal: true
#
# rubyc bin/ylem --keep-tmpdir -r . -o ylem
require 'pathname'

$PROGRAM_NAME = 'ylem'

# require lib requirements -------------------------------------------

[nil, :cli].each do |r|
  req = r ? "#{$PROGRAM_NAME}/#{r}" : $PROGRAM_NAME

  begin
    require Pathname.new(__dir__).join('..', 'lib', '%s' % req)
  rescue LoadError
    begin
      require req
    rescue LoadError
      require 'rubygems'
      require req
    end
  end
end

# execution ----------------------------------------------------------

require 'sys/proc'

Sys::Proc.progname = nil
exit Ylem::Cli.run.to_i
